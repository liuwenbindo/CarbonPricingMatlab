<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" href="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/matlab-report-styles.css" type="text/css" /><title>Function details for DLWDamage&gt;DLWDamage.recombine_nodes</title><link rel="stylesheet" href="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/matlab-report-styles.css" type="text/css" /></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><span style="font-size:14pt; background:#FFE4B0">DLWDamage&gt;DLWDamage.recombine_nodes (982 calls, 1053.569 sec)</span><br/><i>Generated 30-Nov-2017 08:27:54 using cpu time.</i><br/>subfunction in file /Users/liuwenbin/Documents/MATLAB/EZClimate/UtilityCalculation/DLWDamage.m<br/>Copy to new window for comparing multiple runs<div class="grayline"/><div class="grayline"/><strong>Parents</strong> (calling functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td></tr><tr><td class="td-linebottomrt"><a href="file30.html">DLWDamage&gt;DLWDamage.damage_interpolation</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">982</td></tr></table><div class="grayline"/><strong>Lines where the most time was spent</strong><br/> <p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line Number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Code</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="#Line177">177</a></td><td class="td-linebottomrt"><pre>tmp_tree.all_node_probs(node+1...</pre></td><td class="td-linebottomrt">29460</td><td class="td-linebottomrt">362.935 s</td><td class="td-linebottomrt" class="td-linebottomrt">34.4%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=34 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line135">135</a></td><td class="td-linebottomrt"><pre>d_sum(d_class) = sum( obj.tree...</pre></td><td class="td-linebottomrt">106056</td><td class="td-linebottomrt">249.469 s</td><td class="td-linebottomrt" class="td-linebottomrt">23.7%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=24 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line141">141</a></td><td class="td-linebottomrt"><pre>tmp_tree.final_state_probs( ne...</pre></td><td class="td-linebottomrt">106056</td><td class="td-linebottomrt">247.002 s</td><td class="td-linebottomrt" class="td-linebottomrt">23.4%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=23 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line171">171</a></td><td class="td-linebottomrt"><pre>end_states = obj.tree.reachabl...</pre></td><td class="td-linebottomrt">29460</td><td class="td-linebottomrt">57.412 s</td><td class="td-linebottomrt" class="td-linebottomrt">5.4%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=5 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line164">164</a></td><td class="td-linebottomrt"><pre>tmp_tree.all_node_probs(end-(l...</pre></td><td class="td-linebottomrt">982</td><td class="td-linebottomrt">32.407 s</td><td class="td-linebottomrt" class="td-linebottomrt">3.1%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=3 height=10></td></tr><tr><td class="td-linebottomrt">All other lines</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">104.345 s</td><td class="td-linebottomrt">9.9%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=10 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">1053.569 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><b>Children</b> (called functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="file66.html">...el&gt;TreeModel.get.final_state_probs</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">250410</td><td class="td-linebottomrt">541.962 s</td><td class="td-linebottomrt">51.4%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=51 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file57.html">TreeModel&gt;TreeModel.get.all_node_probs</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">32406</td><td class="td-linebottomrt">318.164 s</td><td class="td-linebottomrt">30.2%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=30 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file59.html">TreeModel&gt;TreeModel.reachable_end_state</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">29460</td><td class="td-linebottomrt">55.056 s</td><td class="td-linebottomrt">5.2%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=5 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file23.html">Damage&gt;Damage.set.tree</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">136498</td><td class="td-linebottomrt">20.237 s</td><td class="td-linebottomrt">1.9%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=2 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file29.html">DLWDamage&gt;DLWDamage.set.d_rcomb</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">107038</td><td class="td-linebottomrt">12.447 s</td><td class="td-linebottomrt">1.2%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file58.html">TreeModel&gt;TreeModel.get_nodes_in_period</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">3928</td><td class="td-linebottomrt">3.243 s</td><td class="td-linebottomrt">0.3%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file101.html">TreeModel&gt;TreeModel.set.all_node_probs</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">30442</td><td class="td-linebottomrt">2.855 s</td><td class="td-linebottomrt">0.3%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file55.html">TreeModel&gt;TreeModel.get.num_final_states</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">982</td><td class="td-linebottomrt">0.222 s</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file61.html">TreeModel&gt;TreeModel.get.num_periods</a></td><td class="td-linebottomrt">subfunction</td><td class="td-linebottomrt">982</td><td class="td-linebottomrt">0.139 s</td><td class="td-linebottomrt">0.0%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">Self time (built-ins, overhead, etc.)</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">99.244 s</td><td class="td-linebottomrt">9.4%</td><td class="td-linebottomrt"><img src="file:////Applications/MATLAB/MATLAB_R2015a.app/toolbox/matlab/codetools/private/one-pixel.gif" width=9 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">1053.569 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><strong>Code Analyzer results</strong><br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Message</td></tr><tr><td class="td-linebottomrt"><a href="#Line95">95</a></td><td class="td-linebottomrt"><span class="mono">The variable 'new_state' appears to change size on every loop iteration. Consider preallocating for speed.</span></td></tr></table><div class="grayline"/><strong>Coverage results</strong><br/>Show coverage for parent directory <br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Total lines in function</td><td class="td-linebottomrt">117</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Non-code lines (comments, blank lines)</td><td class="td-linebottomrt">59</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines (lines that can run)</td><td class="td-linebottomrt">58</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did run</td><td class="td-linebottomrt">58</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did not run</td><td class="td-linebottomrt">0</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Coverage (did run/can run)</td><td class="td-linebottomrt">100.00 %</td></tr></table><div class="grayline"/><b>Function listing</b><br/><table id="FunctionListingTable"><tr style="height:20px;"><th><pre><span style="color:#FF0000;">time</span> </pre></th><th><pre><span style="color:#0000FF;">calls</span> </pre></th><th class="leftAligned" COLSPAN=2><pre><span> line</span></pre></th></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  65</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        function obj = recombine_nodes(obj)</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  66</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  67</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%       Creating damage coefficients for recombining tree. The state reached by an up-down move is</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  68</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% 		separate from a down-up move because in general the two paths will lead to different degrees of </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  69</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% 		mitigation and therefore of GHG level. A 'recombining' tree is one in which the movement from </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  70</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% 		one state to the next through time is nonetheless such that an up move followed by a down move </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  71</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">% 		leads to the same fragility.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  72</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                        </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.22 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  73</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            nperiods = obj.tree.num_periods; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.06 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  74</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            sum_class = zeros(1, nperiods); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.03 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  75</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            new_state = {}; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  76</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  77</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % Shallow copy in original Python script, should I keep it?</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  2.74 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  78</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            temp_prob = obj.tree.final_state_probs; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.44 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  79</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            obj.d_rcomb = obj.d; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  80</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                        </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.33 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  81</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            for old_state = 1:obj.tree.num_final_states </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.19 </span></pre></td><td><pre><span style="color: #0000FF">  31424 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  82</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                temp = old_state; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.11 </span></pre></td><td><pre><span style="color: #0000FF">  31424 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  83</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                n = nperiods-2; % last period before recombining </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.08 </span></pre></td><td><pre><span style="color: #0000FF">  31424 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  84</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                d_class = 0; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  85</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.22 </span></pre></td><td><pre><span style="color: #0000FF">  31424 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  86</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                while n &gt;= 0 </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.91 </span></pre></td><td><pre><span style="color: #0000FF"> 157120 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  87</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    if temp - 1 &gt;= 2^n % modify the lower half of all final states </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.25 </span></pre></td><td><pre><span style="color: #0000FF">  78560 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  88</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                        temp = temp - 2^n; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.36 </span></pre></td><td><pre><span style="color: #0000FF">  78560 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  89</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                        d_class = d_class + 1; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.33 </span></pre></td><td><pre><span style="color: #0000FF">  78560 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  90</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.86 </span></pre></td><td><pre><span style="color: #0000FF"> 157120 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  91</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    n = n - 1;                     </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.61 </span></pre></td><td><pre><span style="color: #0000FF"> 157120 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  92</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.06 </span></pre></td><td><pre><span style="color: #0000FF">  31424 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  93</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                sum_class(d_class + 1) = sum_class(d_class + 1) + 1; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  94</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                </span><br/></pre></td></tr><tr><a name="Line95"></a><td><pre><span style="color: #FF0000">  0.44 </span></pre></td><td><pre><span style="color: #0000FF">  31424 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  95</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                new_state{d_class + 1}(sum_class(d_class + 1)) = old_state-1; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.33 </span></pre></td><td><pre><span style="color: #0000FF">  31424 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  96</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  97</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                       </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  98</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%           new_state:</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  99</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%           0</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 100</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%           1  2  4  8  16</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 101</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%           3  5  6  9  10 12 17 18 20 24</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 102</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%           7 11  13  14 19 21 22 25 26 28</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 103</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%           15 23 27 29 30</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 104</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%           31</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 105</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%           sum_class: [1 5 10 10 5 1]</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 106</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%           sum_nodes: [ 0, 1, 6, 16, 26, 31, 32]</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 107</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%           prob_sum: sums up the probabilities of final states partitioned by sum_nodes</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 108</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 109</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            sum_nodes = []; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 110</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            sum_nodes(1) = 0; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.03 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 111</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            sum_nodes(2:length(sum_class)+1) = cumsum(sum_class); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 112</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.06 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 113</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            prob_sum = zeros(1, length(sum_nodes)-1); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.03 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 114</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            for i = 1:length(sum_nodes)-1              </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000"> 12.45 </span></pre></td><td><pre><span style="color: #0000FF">   5892 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 115</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                prob_sum(i) = sum(obj.tree.final_state_probs(sum_nodes(i)+1 : (sum_nodes(i+1)))); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.08 </span></pre></td><td><pre><span style="color: #0000FF">   5892 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 116</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            end      </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 117</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 118</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%           Please uncomment below for testing           </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 119</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%              sum_class</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 120</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%              sum_nodes</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 121</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%              new_state</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 122</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%              new_state{2}</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 123</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%              new_state{3}</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 124</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%              new_state{4}</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 125</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%              new_state{5}</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 126</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">%              prob_sum</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 127</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;"></span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.08 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 128</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">             for period = 1:nperiods   %look into each period </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.22 </span></pre></td><td><pre><span style="color: #0000FF">   5892 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 129</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                 for k = 1:obj.dnum   %look into each simulated scenario </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.55 </span></pre></td><td><pre><span style="color: #0000FF">  17676 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 130</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                     d_sum = zeros(1, nperiods);    %store the probability-weighted sum of the simulated damage for each category </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.17 </span></pre></td><td><pre><span style="color: #0000FF">  17676 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 131</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                     old_state = 1;    %direct to the first node in the the category set, signal </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 132</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                     </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 133</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                     </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.22 </span></pre></td><td><pre><span style="color: #0000FF">  17676 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 134</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                     for d_class = 1 : nperiods                          </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000"> 249.47 </span></pre></td><td><pre><span style="color: #0000FF"> 106056 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 135</span> <a name="Line135"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFAAAA; padding:1px;">                          d_sum(d_class) = sum( obj.tree.final_state_probs( old_state : old_state+sum_class(d_class)-1 ) ... </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 136</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFAAAA; padding:1px;">						 			 .* obj.d_rcomb(old_state : old_state+sum_class(d_class)-1, period, k)' );</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  1.08 </span></pre></td><td><pre><span style="color: #0000FF"> 106056 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 137</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                          old_state = old_state + sum_class(d_class); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 138</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                                         </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  2.63 </span></pre></td><td><pre><span style="color: #0000FF"> 106056 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 139</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                          tmp_tree = obj.tree; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 140</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                          % SET.final_state_probs (TreeModel.m)</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000"> 247.00 </span></pre></td><td><pre><span style="color: #0000FF"> 106056 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 141</span> <a name="Line141"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFAAAA; padding:1px;">                          tmp_tree.final_state_probs( new_state{d_class}(1:sum_class(d_class)) +1 ) = temp_prob(1); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 142</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                          % SET.tree</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000"> 30.41 </span></pre></td><td><pre><span style="color: #0000FF"> 106056 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 143</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                          obj.tree = tmp_tree;     </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.83 </span></pre></td><td><pre><span style="color: #0000FF"> 106056 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 144</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                     end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 145</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                     </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.42 </span></pre></td><td><pre><span style="color: #0000FF">  17676 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 146</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                     for d_class = 1:nperiods                                               </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 147</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                         % SET.d_rcomb</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000"> 29.00 </span></pre></td><td><pre><span style="color: #0000FF"> 106056 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 148</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                         obj.d_rcomb(new_state{d_class}(1:sum_class(d_class))+1, period, k) = d_sum(d_class) / prob_sum(d_class); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 149</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                         </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 150</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                         % Alternative way:</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 151</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                         % tmp_d_rcomb = obj.d_rcomb;</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 152</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                         % tmp_d_rcomb(k, new_state(d_class, 1:sum_class(class)), period) = d_sum(d_class) / prob_sum(d_class);</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 153</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                         % obj.d_rcomb = tmp_d_rcomb;</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.78 </span></pre></td><td><pre><span style="color: #0000FF"> 106056 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 154</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                     end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.14 </span></pre></td><td><pre><span style="color: #0000FF">  17676 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 155</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                 end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">   5892 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 156</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">             end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 157</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">             </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 158</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">             % After final_states_prob being updated</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  2.13 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 159</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">             last_num_elements = length(obj.tree.final_state_probs); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 160</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">             </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 161</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">             % find the probability-weighted average damage</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 162</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">             % SET.tree; SET.all_node_probs</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.03 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 163</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">             tmp_tree = obj.tree;             </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000"> 32.41 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 164</span> <a name="Line164"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">             tmp_tree.all_node_probs(end-(last_num_elements-1):end) = obj.tree.final_state_probs; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.14 </span></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 165</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">             obj.tree = tmp_tree; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 166</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">             </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 167</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">             for p =2:nperiods-1 </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  3.47 </span></pre></td><td><pre><span style="color: #0000FF">   3928 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 168</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                 nodes = obj.tree.get_nodes_in_period(p-1);    </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 169</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                 % look into all the nodes for the period</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.06 </span></pre></td><td><pre><span style="color: #0000FF">   3928 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 170</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                 for node = nodes(1):nodes(2)  </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000"> 57.41 </span></pre></td><td><pre><span style="color: #0000FF">  29460 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 171</span> <a name="Line171"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFF0F0; padding:1px;">                    end_states = obj.tree.reachable_end_state(node); % determine reachable final states </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.11 </span></pre></td><td><pre><span style="color: #0000FF">  29460 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 172</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    worst_end_state = end_states(1); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.36 </span></pre></td><td><pre><span style="color: #0000FF">  29460 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 173</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    best_end_state = end_states(2); </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 174</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                    </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;"> 175</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                    % SET.tree</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.80 </span></pre></td><td><pre><span style="color: #0000FF">  29460 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 176</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    tmp_tree = obj.tree; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000"> 362.93 </span></pre></td><td><pre><span style="color: #0000FF">  29460 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 177</span> <a name="Line177"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FF8080; padding:1px;">                    tmp_tree.all_node_probs(node+1) = sum( obj.tree.final_state_probs(worst_end_state+1:best_end_state+1) ); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  9.12 </span></pre></td><td><pre><span style="color: #0000FF">  29460 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 178</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    obj.tree = tmp_tree; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.28 </span></pre></td><td><pre><span style="color: #0000FF">  29460 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 179</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                 end                  </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">   3928 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 180</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">             end            </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre><span style="color: #0000FF">    982 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; "> 181</span> </pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        end </span><br/></pre></td></tr></table><p><p>Other subfunctions in this file are not included in this listing.</body></html>